---
phase: 01-foundation
plan: 03
type: execute
wave: 2
depends_on:
  - "01-02"
files_modified:
  - src/components/**/*.tsx
  - src/app/**/*.tsx
autonomous: false
requirements:
  - CLEAN-04
must_haves:
  truths:
    - "No raw text-gray-*, bg-gray-*, or border-gray-* Tailwind classes appear anywhere in src/"
    - "All replaced tokens render visually correct warm-toned colors matching the design intent"
    - "Dark mode is not broken — semantic tokens adapt correctly in .dark context"
  artifacts:
    - path: "src/components/"
      provides: "All components using semantic design tokens"
      contains: "text-muted-foreground|text-foreground|bg-muted|border-border"
  key_links:
    - from: "src/components/**/*.tsx"
      to: "src/app/globals.css"
      via: "Tailwind utility classes resolving to CSS custom properties"
      pattern: "text-muted-foreground|bg-muted|border-border"
---

<objective>
Replace all raw Tailwind gray utility classes (text-gray-*, bg-gray-*, border-gray-*) with semantic design tokens across the entire codebase.

Purpose: Eliminate hardcoded gray values so the design system is theme-switchable and consistent. This is the highest-volume task in Phase 1 (~1,275 occurrences across ~130 files) and must be done systematically.
Output: Zero raw gray classes in the codebase — all replaced with semantic tokens from the shadcn/ui system.
</objective>

<execution_context>
@/Users/gvozdovic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gvozdovic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace high-frequency gray text classes across all files</name>
  <files>src/components/**/*.tsx, src/app/**/*.tsx</files>
  <action>
    **Systematic replacement of text-gray-* classes using the research-validated mapping:**

    Execute these replacements across ALL .tsx and .ts files in src/:

    1. `text-gray-900` → `text-foreground` (233 occurrences — headings, strong text)
    2. `text-gray-800` → `text-foreground` (dark body text)
    3. `text-gray-700` → `text-foreground` (semi-dark text — use foreground unless it's clearly meant to be subdued, then use text-muted-foreground)
    4. `text-gray-600` → `text-muted-foreground` (408 occurrences — THE most common, subdued/meta text)
    5. `text-gray-500` → `text-muted-foreground` (190 occurrences — placeholder/helper text)
    6. `text-gray-400` → `text-muted-foreground` (71 occurrences — disabled/faint text)
    7. `text-gray-300` → `text-muted-foreground/60` (very faint, use opacity modifier)
    8. `text-gray-200` → `text-muted-foreground/40` (very faint, rare)
    9. `text-gray-100` → `text-muted-foreground/30` (barely visible, rare)

    **Approach:** For each replacement, use project-wide find-and-replace. After each batch, spot-check 2-3 files to ensure the replacement is contextually correct.

    **Context-sensitive exceptions to watch for:**
    - `text-gray-400` on a `disabled` or `placeholder` element → `text-muted-foreground` is correct
    - `text-gray-600` inside an error message context → should remain semantic, `text-muted-foreground` is still correct here (error color comes from a different class)
    - Conditional classes like `isActive ? 'text-gray-900' : 'text-gray-500'` → `isActive ? 'text-foreground' : 'text-muted-foreground'`

    **Also handle hover/focus variants:**
    - `hover:text-gray-900` → `hover:text-foreground`
    - `hover:text-gray-700` → `hover:text-foreground`
    - `hover:text-gray-600` → `hover:text-muted-foreground`
    - `focus:text-gray-*` → same mapping as above
  </action>
  <verify>
    Run `grep -rn "text-gray-" src/ --include="*.tsx" --include="*.ts" | wc -l` — should return 0.
    Run `pnpm lint` — no new errors.
  </verify>
  <done>
    Zero `text-gray-*` classes remain in the codebase. All replaced with `text-foreground`, `text-muted-foreground`, or opacity variants.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Spot-check text-gray replacements before proceeding</name>
  <files>src/components/**/*.tsx, src/app/**/*.tsx</files>
  <action>
    **What was built:** All text-gray-* classes replaced with semantic tokens (text-foreground, text-muted-foreground, opacity variants) across ~130 files.

    **How to verify:**
    1. Run `pnpm dev` and open the app in a browser
    2. Check the home page — headings should be readable warm-toned text, not washed out or invisible
    3. Check a provider detail page — subdued/meta text (ratings, dates, helper text) should be clearly visible but lighter than headings
    4. Check the booking wizard — form labels and helper text should be distinguishable from primary text
    5. Check any hover states on navigation links — hover color should change visibly
    6. If any text appears invisible, unreadable, or has lost its intended visual hierarchy, describe the issue

    **Resume signal:** Type "approved" to proceed with background/border replacements, or describe any issues to fix first.
  </action>
  <verify>User visually confirms text replacements render correctly across home page, provider detail, and booking wizard.</verify>
  <done>User approved text-gray replacements — no invisible, unreadable, or hierarchy-broken text reported.</done>
</task>

<task type="auto">
  <name>Task 3: Replace gray background and border classes across all files</name>
  <files>src/components/**/*.tsx, src/app/**/*.tsx</files>
  <action>
    **Background replacements:**

    1. `bg-gray-50` → `bg-muted` (107 occurrences — subtle background highlight)
    2. `bg-gray-100` → `bg-muted` (40 occurrences — light gray background)
    3. `bg-gray-200` → `bg-muted` or `bg-secondary` (76 occurrences — check context: if it's a hover state or selected state, prefer `bg-secondary`; if it's a subtle container background, prefer `bg-muted`)
    4. `bg-gray-300` → `bg-secondary` (stronger background)
    5. `bg-gray-400` → `bg-secondary` (medium gray)
    6. `bg-gray-500` → `bg-muted-foreground` (rare — medium gray as background)
    7. `bg-gray-600` → `bg-muted-foreground` (dark background)
    8. `bg-gray-700` → `bg-foreground/80` (dark background with opacity)
    9. `bg-gray-800` → `bg-foreground` (near-black background)
    10. `bg-gray-900` → `bg-foreground` (darkest background)

    **Border replacements:**

    1. `border-gray-100` → `border-border/50` (very subtle divider — use opacity)
    2. `border-gray-200` → `border-border` (66 occurrences — standard divider, THE canonical border)
    3. `border-gray-300` → `border-border` (44 occurrences — same token, slightly heavier)
    4. `border-gray-400` → `border-border` (medium border)
    5. `border-gray-500` → `border-border` (stronger border)
    6. `border-gray-600` → `border-foreground/20` (dark border)
    7. `border-gray-700` → `border-foreground/20` (dark border via opacity)
    8. `border-gray-800` → `border-foreground/30` (very dark border)

    **Also handle variants:**
    - `hover:bg-gray-50` → `hover:bg-muted`
    - `hover:bg-gray-100` → `hover:bg-muted`
    - `hover:bg-gray-200` → `hover:bg-secondary`
    - `focus:border-gray-*` → `focus:border-border` or `focus:border-ring`
    - `divide-gray-200` → `divide-border`
    - `ring-gray-*` → `ring-ring` or `ring-border`
    - `placeholder:text-gray-*` → `placeholder:text-muted-foreground`

    **Context-sensitive decisions for bg-gray-200:**
    - If used as a skeleton/loading placeholder background → `bg-muted`
    - If used as a hover state → `bg-secondary` or `hover:bg-muted`
    - If used as a tag/badge background → `bg-secondary`
    - When in doubt, prefer `bg-muted` (lighter, more neutral)

    **After all replacements:**
    Run a final comprehensive grep to catch any missed patterns:
    ```bash
    grep -rn "gray-" src/ --include="*.tsx" --include="*.ts" --include="*.css"
    ```
    This should return zero results (or only results in comments/strings, not class names).
  </action>
  <verify>
    Run `grep -rn "bg-gray-\|border-gray-\|divide-gray-\|ring-gray-" src/ --include="*.tsx" --include="*.ts" | wc -l` — should return 0.
    Run `grep -rn "text-gray-" src/ --include="*.tsx" --include="*.ts" | wc -l` — should still be 0 (from Task 1).
    Run `pnpm lint` — no new errors.
    Run `pnpm build` — builds successfully.
  </verify>
  <done>
    Zero raw gray Tailwind classes (text-gray-*, bg-gray-*, border-gray-*, divide-gray-*, ring-gray-*) remain anywhere in src/. All replaced with semantic tokens: text-foreground, text-muted-foreground, bg-muted, bg-secondary, border-border, and opacity variants. `pnpm build` succeeds.
  </done>
</task>

</tasks>

<verification>
1. `grep -rn "text-gray-\|bg-gray-\|border-gray-\|divide-gray-\|ring-gray-" src/ --include="*.tsx" --include="*.ts" | wc -l` returns 0
2. `pnpm build` completes successfully
3. `pnpm lint` passes
4. Spot-check: open the home page, provider list, and booking wizard — text should render warm-toned, no washed-out or invisible text
</verification>

<success_criteria>
- Zero raw gray Tailwind classes in the entire src/ directory
- All ~1,275 occurrences replaced with semantic design tokens
- Application builds and renders without visual regressions
- Dark mode semantic tokens work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>
